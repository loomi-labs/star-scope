-- create "chains" table
CREATE TABLE "chains" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "chain_id" character varying NOT NULL, "name" character varying NOT NULL, "pretty_name" character varying NOT NULL, "path" character varying NOT NULL, "image" character varying NOT NULL, "bech32_prefix" character varying NOT NULL, "rest_endpoint" character varying NOT NULL DEFAULT '', "indexing_height" bigint NOT NULL DEFAULT 0, "has_custom_indexer" boolean NOT NULL DEFAULT false, "handled_message_types" character varying NOT NULL DEFAULT '', "unhandled_message_types" character varying NOT NULL DEFAULT '', "is_enabled" boolean NOT NULL DEFAULT false, PRIMARY KEY ("id"));
-- create index "chain_name" to table: "chains"
CREATE UNIQUE INDEX "chain_name" ON "chains" ("name");
-- create index "chains_name_key" to table: "chains"
CREATE UNIQUE INDEX "chains_name_key" ON "chains" ("name");
-- create index "chains_path_key" to table: "chains"
CREATE UNIQUE INDEX "chains_path_key" ON "chains" ("path");
-- create index "chains_pretty_name_key" to table: "chains"
CREATE UNIQUE INDEX "chains_pretty_name_key" ON "chains" ("pretty_name");
-- create "contract_proposals" table
CREATE TABLE "contract_proposals" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "proposal_id" bigint NOT NULL, "title" character varying NOT NULL, "description" character varying NOT NULL, "first_seen_time" timestamptz NOT NULL, "voting_end_time" timestamptz NOT NULL, "contract_address" character varying NOT NULL, "status" character varying NOT NULL, "chain_contract_proposals" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "contract_proposals_chains_contract_proposals" FOREIGN KEY ("chain_contract_proposals") REFERENCES "chains" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- create "users" table
CREATE TABLE "users" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "name" character varying NOT NULL, "wallet_address" character varying NOT NULL, "role" character varying NOT NULL DEFAULT 'user', PRIMARY KEY ("id"));
-- create "event_listeners" table
CREATE TABLE "event_listeners" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "wallet_address" character varying NOT NULL, "chain_event_listeners" bigint NULL, "user_event_listeners" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "event_listeners_chains_event_listeners" FOREIGN KEY ("chain_event_listeners") REFERENCES "chains" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "event_listeners_users_event_listeners" FOREIGN KEY ("user_event_listeners") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
-- create "events" table
CREATE TABLE "events" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "event_type" character varying NOT NULL, "data" bytea NOT NULL, "data_type" character varying NOT NULL, "is_tx_event" boolean NOT NULL, "notify_time" timestamptz NOT NULL, "is_read" boolean NOT NULL DEFAULT false, "event_listener_events" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "events_event_listeners_events" FOREIGN KEY ("event_listener_events") REFERENCES "event_listeners" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
-- create "proposals" table
CREATE TABLE "proposals" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "proposal_id" bigint NOT NULL, "title" character varying NOT NULL, "description" character varying NOT NULL, "voting_start_time" timestamptz NOT NULL, "voting_end_time" timestamptz NOT NULL, "status" character varying NOT NULL, "chain_proposals" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "proposals_chains_proposals" FOREIGN KEY ("chain_proposals") REFERENCES "chains" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
